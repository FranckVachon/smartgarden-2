import java.util.Random

rule "Initialiser les lumières"
when
    System started
then
    logError("jardin.rules", "FUCK FUCK FUCK FUCK")
end



/**
 * initialiser divers états de nos items .
 */

 // lumières: initialisées fermées
rule "Initialiser les lumières"
when
    System started
then

    logError("jardin.rules", "FUCK FUCK FUCK FUCK")
    lumieres?.members.forEach(lum|
        postUpdate(lum, ON)
    )
end


 // verrous: initialisées verrouillés (ON)
rule "Initialiser les verrous"
when
    System started
then
    logError("jardin.rules", "FUCK FUCK FUCK FUCK")
    verrous?.members.forEach(verrou|
        postUpdate(verrou, ON)
    )
end

 // verrous: initialisées verrouillés (ON)
rule "Initialiser les thermostats"
when
    System started
then

    verrous?.members.forEach(verrou|
        postUpdate(verrou, ON)
    )
end

rule "Initialiser les températures aléatoires"
when
    System started
then
    logInfo("Info", "Initialiser les températures aléatoires")
    gTemperature.members.forEach(temperature|
        postUpdate(temperature, 17.5 ))
end

rule "Initialiser les températures  - controllers"
when
    System started
then
    gThermostat.members.forEach(thermo|
        postUpdate(thermo,22)
    )
end

rule "Turn on lights when detected movement"
when
    Item mouvement_nord_ouest changed from OFF to ON or
	Item mouvement_sud_ouest changed from OFF to ON or
	Item mouvement_sud_est changed from OFF to ON or
	Item mouvement_nord_est changed from OFF to ON or
	Item mouvement_est changed from OFF to ON
then
	var nightTimeStart = 2300
	var nightTimeEnd = 0530
	var currentTime = now.getHourOfDay * 100 + now.getMinuteOfHour
	if (currentTime >= nightTimeStart || currentTime <= nightTimeEnd) {
	}
	else {
		lumieresPatio.sendCommand(ON)
	}
end